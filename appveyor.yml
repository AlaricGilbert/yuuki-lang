version: '{build}'

image: Visual Studio 2019

clone_script:
  - cmd: >-
      git clone -q --branch=%APPVEYOR_REPO_BRANCH% https://github.com/%APPVEYOR_REPO_NAME%.git %APPVEYOR_BUILD_FOLDER%
      && cd %APPVEYOR_BUILD_FOLDER%
      && git checkout -qf %APPVEYOR_REPO_COMMIT%
      && git submodule update --init --recursive
      
build_script:
  - mkdir build
  - cd build
  - call "C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Auxiliary\Build\vcvars64.bat"
  - cmake .. -G"NMake Makefiles"
  - nmake
  - cd ..

test_script:
  - ps: cd artifacts
  - yukcorlib_test
  - cd ..
